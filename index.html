<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatize seu negócio</title>
    <link rel="icon" href="gerenciamento-de-conteudo.png">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="form-container">
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>

        <!-- Página de Introdução -->
        <div class="intro-container" id="intro">
            <h1 class="intro-title">Automatize seu Negócio</h1>
            <p class="intro-subtitle">Essas perguntas nos ajudarão a ter um panorama claro da sua intenção inicial e de
                como podemos ajudar você.</p>
            <button class="btn btn-start" onclick="startForm()">Começar</button>
        </div>

        <div class="question-container">
            <!-- Questão 1 -->
            <div class="question hidden" id="question1">
                <div class="question-number">1 de 8</div>
                <h2 class="question-text">Digite seu nome completo</h2>
                <input type="text" class="input-field" id="fullName" placeholder="Seu nome completo">
                <div class="error-message hidden" id="name-error">Por favor, insira seu nome completo</div>
                <div class="buttons">
                    <button class="btn btn-prev" onclick="prevQuestion(1)">Voltar</button>
                    <button class="btn btn-next" onclick="nextQuestion(1)">Próxima</button>
                </div>
            </div>

            <!-- Questão 2 -->
            <div class="question hidden" id="question2">
                <div class="question-number">2 de 8</div>
                <h2 class="question-text">Qual seu WhatsApp?</h2>
                <input type="tel" class="input-field" id="whatsapp" placeholder="(11) 99999-9999">
                <div class="error-message hidden" id="whatsapp-error">Por favor, insira um número de WhatsApp válido
                </div>
                <div class="buttons">
                    <button class="btn btn-prev" onclick="prevQuestion(2)">Voltar</button>
                    <button class="btn btn-next" onclick="nextQuestion(2)">Próxima</button>
                </div>
            </div>

            <!-- Questão 3 -->
            <div class="question hidden" id="question3">
                <div class="question-number">3 de 8</div>
                <h2 class="question-text">Seu @ no Instagram</h2>
                <input type="text" class="input-field" id="instagram" placeholder="@seuuser">
                <div class="error-message hidden" id="instagram-error">Por favor, insira seu @ do Instagram</div>
                <div class="buttons">
                    <button class="btn btn-prev" onclick="prevQuestion(3)">Voltar</button>
                    <button class="btn btn-next" onclick="nextQuestion(3)">Próxima</button>
                </div>
            </div>

            <!-- Questão 4 (início das perguntas com tema verde) -->
            <div class="question hidden green-section" id="question4">
                <div class="question-number">4 de 8</div>
                <h2 class="question-text">Qual é o seu tipo de negócio?</h2>
                <div class="options">
                    <div class="option" data-value="Loja física">Loja física</div>
                    <div class="option" data-value="Infoproduto">Infoproduto</div>
                    <div class="option" data-value="Prestador de serviços">Prestador de serviços</div>
                    <div class="option" data-value="Agência">Agência</div>
                    <div class="option" data-value="Clínica">Clínica</div>
                    <div class="option" data-value="Outro">Outro</div>
                </div>
                <div class="buttons">
                    <button class="btn btn-prev" onclick="prevQuestion(4)">Voltar</button>
                    <button class="btn btn-next" onclick="nextQuestion(4)">Próxima</button>
                </div>
            </div>

            <!-- Questão 5 -->
            <div class="question hidden green-section" id="question5">
                <div class="question-number">5 de 8</div>
                <h2 class="question-text">Qual área você quer automatizar primeiro?</h2>
                <div class="options">
                    <div class="option" data-value="Atendimento">Atendimento</div>
                    <div class="option" data-value="Prospecção">Prospecção</div>
                    <div class="option" data-value="SDR / Follow-up">SDR / Follow-up</div>
                    <div class="option" data-value="Operações">Operações</div>
                    <div class="option" data-value="Tudo">Tudo</div>
                </div>
                <div class="buttons">
                    <button class="btn btn-prev" onclick="prevQuestion(5)">Voltar</button>
                    <button class="btn btn-next" onclick="nextQuestion(5)">Próxima</button>
                </div>
            </div>

            <!-- Questão 6 -->
            <div class="question hidden green-section" id="question6">
                <div class="question-number">6 de 8</div>
                <h2 class="question-text">Hoje seu faturamento mensal está em:</h2>
                <div class="options">
                    <div class="option" data-value="< R$10k">
                        < R$10k</div>
                            <div class="option" data-value="R$10–50k">R$10–50k</div>
                            <div class="option" data-value="R$50–200k">R$50–200k</div>
                            <div class="option" data-value="R$200k">> R$200k</div>
                    </div>
                    <div class="buttons">
                        <button class="btn btn-prev" onclick="prevQuestion(6)">Voltar</button>
                        <button class="btn btn-next" onclick="nextQuestion(6)">Próxima</button>
                    </div>
                </div>

                <!-- Questão 7 - Campo de texto livre para o maior desafio -->
                <div class="question hidden green-section" id="question7">
                    <div class="question-number">7 de 8</div>
                    <h2 class="question-text">Qual o seu maior desafio atualmente?</h2>
                    <textarea class="input-field textarea-field" id="biggestChallenge"
                        placeholder="Descreva aqui o seu maior desafio atual..." rows="4"></textarea>
                    <div class="error-message hidden" id="challenge-error">Por favor, descreva seu maior desafio</div>
                    <div class="buttons">
                        <button class="btn btn-prev" onclick="prevQuestion(7)">Voltar</button>
                        <button class="btn btn-next" onclick="nextQuestion(7)">Próxima</button>
                    </div>
                </div>

                <!-- Questão 8 -->
                <div class="question hidden green-section" id="question8">
                    <div class="question-number">8 de 8</div>
                    <h2 class="question-text">Qual urgência da implementação?</h2>
                    <div class="options">
                        <div class="option" data-value="Imediata">Imediata</div>
                        <div class="option" data-value="7 dias">7 dias</div>
                        <div class="option" data-value="30 dias">30 dias</div>
                        <div class="option" data-value="Estou avaliando">Estou avaliando</div>
                    </div>
                    <div class="buttons">
                        <button class="btn btn-prev" onclick="prevQuestion(8)">Voltar</button>
                        <button class="btn btn-submit" onclick="submitForm()">Enviar</button>
                    </div>
                </div>

                <!-- Tela de agradecimento -->
                <div class="question hidden" id="thankYou">
                    <h2 class="question-text">Obrigado!</h2>
                    <p style="font-size: 18px; color: #666; margin-top: 20px; line-height: 1.6;">Agradecemos pelas
                        informações. Em breve entraremos em contato pelo WhatsApp para dar continuidade ao processo de
                        automatização do seu negócio...</p>
                </div>
            </div>
        </div>

        <script>
            // Armazenar respostas
            const answers = {
                fullName: '',
                whatsapp: '',
                instagram: '',
                businessType: '',
                automationArea: '',
                revenue: '',
                biggestChallenge: '',
                urgency: ''
            };

            // Inicializar seleção de opções
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function () {
                    // Remover seleção de outras opções no mesmo grupo
                    const parent = this.parentElement;
                    parent.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });

                    // Selecionar a opção clicada
                    this.classList.add('selected');

                    // Armazenar resposta
                    const questionId = this.closest('.question').id;
                    const value = this.getAttribute('data-value');

                    switch (questionId) {
                        case 'question4':
                            answers.businessType = value;
                            break;
                        case 'question5':
                            answers.automationArea = value;
                            break;
                        case 'question6':
                            answers.revenue = value;
                            break;
                        case 'question8':
                            answers.urgency = value;
                            break;
                    }
                });
            });

            // Iniciar formulário (da página de introdução)
            function startForm() {
                document.getElementById('intro').classList.add('hidden');
                document.getElementById('question1').classList.remove('hidden');
                updateProgress(1);
            }

            // Atualizar barra de progresso
            function updateProgress(currentQuestion) {
                const progress = document.getElementById('progress');
                const percentage = ((currentQuestion) / 8) * 100;
                progress.style.width = `${percentage}%`;
            }

            // Navegar para a próxima pergunta
            function nextQuestion(currentQuestion) {
                // Validar campos de entrada
                if (currentQuestion === 1) {
                    const nameInput = document.getElementById('fullName');
                    if (!nameInput.value.trim()) {
                        document.getElementById('name-error').classList.remove('hidden');
                        return;
                    }
                    answers.fullName = nameInput.value.trim();
                    document.getElementById('name-error').classList.add('hidden');
                }

                if (currentQuestion === 2) {
                    const whatsappInput = document.getElementById('whatsapp');
                    const cleanWhatsapp = whatsappInput.value.replace(/\D/g, '');

                    if (!cleanWhatsapp || cleanWhatsapp.length < 10) {
                        document.getElementById('whatsapp-error').classList.remove('hidden');
                        return;
                    }
                    answers.whatsapp = cleanWhatsapp;
                    document.getElementById('whatsapp-error').classList.add('hidden');
                }

                if (currentQuestion === 3) {
                    const instagramInput = document.getElementById('instagram');
                    if (!instagramInput.value.trim()) {
                        document.getElementById('instagram-error').classList.remove('hidden');
                        return;
                    }
                    answers.instagram = instagramInput.value.trim();
                    document.getElementById('instagram-error').classList.add('hidden');
                }

                // Validar se uma opção foi selecionada (para perguntas de múltipla escolha)
                if (currentQuestion >= 4 && currentQuestion <= 6) {
                    const currentQuestionElement = document.getElementById(`question${currentQuestion}`);
                    const selectedOption = currentQuestionElement.querySelector('.option.selected');

                    if (!selectedOption) {
                        alert('Por favor, selecione uma opção antes de continuar.');
                        return;
                    }
                }

                // Validar campo de texto livre (questão 7 - maior desafio)
                if (currentQuestion === 7) {
                    const challengeInput = document.getElementById('biggestChallenge');
                    if (!challengeInput.value.trim()) {
                        document.getElementById('challenge-error').classList.remove('hidden');
                        return;
                    }
                    answers.biggestChallenge = challengeInput.value.trim();
                    document.getElementById('challenge-error').classList.add('hidden');
                }

                // Esconder pergunta atual
                document.getElementById(`question${currentQuestion}`).classList.add('hidden');

                // Mostrar próxima pergunta
                document.getElementById(`question${currentQuestion + 1}`).classList.remove('hidden');

                // Atualizar barra de progresso
                updateProgress(currentQuestion + 1);
            }

            // Voltar para a pergunta anterior
            function prevQuestion(currentQuestion) {
                // Esconder pergunta atual
                document.getElementById(`question${currentQuestion}`).classList.add('hidden');

                // Mostrar pergunta anterior
                if (currentQuestion === 1) {
                    document.getElementById('intro').classList.remove('hidden');
                } else {
                    document.getElementById(`question${currentQuestion - 1}`).classList.remove('hidden');
                }

                // Atualizar barra de progresso
                updateProgress(currentQuestion - 1);
            }

            // Função para enviar dados para o webhook
            async function sendToWebhook(data) {
                try {
                    const response = await fetch('https://webhook.johnvic.shop/webhook/qualificacao-automacao', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data)
                    });

                    if (response.ok) {
                        console.log('Dados enviados com sucesso para o webhook');
                        return true;
                    } else {
                        console.error('Erro ao enviar dados para o webhook:', response.status);
                        return false;
                    }
                } catch (error) {
                    console.error('Erro na requisição:', error);
                    return false;
                }
            }

            // Validar e enviar formulário
            async function submitForm() {
                // Validar última pergunta
                const currentQuestionElement = document.getElementById('question8');
                const selectedOption = currentQuestionElement.querySelector('.option.selected');

                if (!selectedOption) {
                    alert('Por favor, selecione uma opção antes de enviar.');
                    return;
                }

                // Armazenar última resposta
                answers.urgency = selectedOption.getAttribute('data-value');

                // Mostrar loading no botão
                const submitBtn = document.querySelector('.btn-submit');
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'Enviando...';
                submitBtn.disabled = true;

                // Adicionar timestamp
                const submissionData = {
                    ...answers,
                    timestamp: new Date().toISOString(),
                    source: 'form-automatizacao'
                };

                // Enviar dados para o webhook
                const success = await sendToWebhook(submissionData);

                // Restaurar botão
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;

                if (success) {
                    // Mostrar tela de agradecimento
                    document.getElementById('question8').classList.add('hidden');
                    document.getElementById('thankYou').classList.remove('hidden');
                    document.getElementById('progress').style.width = '100%';

                    // Log no console para debug
                    console.log('Respostas do formulário:', submissionData);
                } else {
                    alert('Erro ao enviar o formulário. Por favor, tente novamente.');
                }
            }

            // Inicializar barra de progresso
            updateProgress(0);
        </script>
</body>

</html>